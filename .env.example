# Environment Configuration Example for UIForge Projects
# Copy this file to .env.shared and customize for your project
# Create environment-specific overrides in .env.development, .env.production, or .env.local

# =============================================================================
# QUICK START GUIDE
# =============================================================================
# 1. Copy this file to .env.shared:
#    cp .env.example .env.shared
#
# 2. Generate strong secrets:
#    make generate-secrets
#
# 3. Create environment-specific overrides (optional):
#    cp .env.development.example .env.development
#    cp .env.production.example .env.production
#
# 4. Start the services:
#    make start
#
# For detailed setup instructions, see:
# - docs/ENVIRONMENT_CONFIGURATION.md
# - docs/IDE_SETUP_GUIDE.md

# =============================================================================
# REQUIRED CONFIGURATION
# =============================================================================

# Gateway host and port
GATEWAY_HOST=0.0.0.0
GATEWAY_PORT=4444

# Database (SQLite by default)
DATABASE_URL=sqlite:////data/mcp.db

# =============================================================================
# AUTHENTICATION & SECURITY (REQUIRED)
# =============================================================================
# Generate strong secrets with: make generate-secrets
JWT_SECRET_KEY=REPLACE_WITH_STRONG_SECRET_32_CHARS_MIN
AUTH_ENCRYPTION_SECRET=REPLACE_WITH_STRONG_SECRET_32_CHARS_MIN

# Platform administrator (change for production)
PLATFORM_ADMIN_EMAIL=admin@example.com
PLATFORM_ADMIN_PASSWORD=REPLACE_ME
PLATFORM_ADMIN_FULL_NAME="Platform Administrator"

# Authentication settings
AUTH_REQUIRED=true
SECURE_COOKIES=false

# =============================================================================
# MCP GATEWAY FEATURES
# =============================================================================
MCPGATEWAY_UI_ENABLED=true
MCPGATEWAY_ADMIN_API_ENABLED=true

# =============================================================================
# SERVICE PORTS
# =============================================================================
# Core Services
FORGE_SERVICE_MANAGER_PORT=9000
FORGE_TRANSLATE_PORT=8000
FORGE_TOOL_ROUTER_PORT=8030
FORGE_UI_PORT=8026

# AI Configuration
ROUTER_AI_ENABLED=false
ROUTER_AI_PROVIDER=ollama
ROUTER_AI_MODEL=llama3.2:3b
ROUTER_AI_ENDPOINT=http://ollama:11434
ROUTER_AI_TIMEOUT_MS=2000
ROUTER_AI_WEIGHT=0.7
OLLAMA_PORT=11434

# =============================================================================
# FEATURE TOGGLES
# =============================================================================
# Core Features
FEATURE_CORE_AI_ROUTER=true
FEATURE_CORE_HYBRID_SCORING=true
FEATURE_CORE_TOOL_SEARCH=true
FEATURE_CORE_EXECUTE_TASK=true

# API Features
FEATURE_API_HEALTH=true
FEATURE_API_METRICS=true
FEATURE_API_LIFECYCLE=true
FEATURE_API_IDE_CONFIG=true
FEATURE_API_FEATURES=true

<<<<<<< Updated upstream
# Tool Features
FEATURE_TOOL_LIST_SERVERS=true
FEATURE_TOOL_GET_SERVER_STATUS=true
FEATURE_TOOL_ENABLE_SERVER=true
FEATURE_TOOL_DISABLE_SERVER=true
=======
# Create/update virtual server and print Cursor URL (requires jq). Set false to skip.
# REGISTER_VIRTUAL_SERVER=true
# REGISTER_VIRTUAL_SERVER_NAME=default
# Which virtual server URL to write to data/.mcp-client-url (wrapper uses it). If unset, default is mcp-router (tool-router). To use the full tool set, set mcp-default.
# REGISTER_MCP_CLIENT_SERVER_NAME=mcp-default
# Backward compatibility: REGISTER_CURSOR_MCP_SERVER_NAME still works
# Seconds to wait before syncing tools/virtual servers (default 3). If GET /servers returns non-200, script skips virtual server create/update and suggests Admin UI or retry.
# REGISTER_VIRTUAL_SERVER_DELAY=3
# When GET /servers returns 5xx or 408, delay in seconds before extra retries (default 5). Set to 0 to disable delayed retries.
# REGISTER_GET_SERVERS_RETRY_DELAY=5
# When set to true/1/yes and GET /servers still fails after retries, attempt create-only (POST) for virtual servers; no update, possible duplicates if run again. See docs/ADMIN_UI_MANUAL_REGISTRATION.md.
# REGISTER_VIRTUAL_SERVER_CREATE_WHEN_GET_FAILS=
>>>>>>> Stashed changes

# UI Features
FEATURE_UI_WEB_ADMIN=true
FEATURE_UI_FEATURE_TOGGLES=true
FEATURE_UI_SERVER_MANAGEMENT=true
FEATURE_UI_GATEWAY_MONITORING=true

# =============================================================================
# OPTIONAL: ADVANCED CONFIGURATION
# =============================================================================

# AI Routing Settings
ROUTER_AI_TIMEOUT_MS=10000
ROUTER_AI_WEIGHT=0.7
ROUTER_AI_MIN_CONFIDENCE=0.3
OLLAMA_KEEP_ALIVE=false

# Performance Settings
FORGE_MAX_REQUEST_SIZE=10MB
FORGE_REQUEST_TIMEOUT=30
FORGE_ENABLE_RATE_LIMITING=true
FORGE_RATE_LIMIT_REQUESTS=100
FORGE_RATE_LIMIT_WINDOW=1m

# Docker Configuration
COMPOSE_PROJECT_NAME=forge-mcp-gateway
DOCKER_REGISTRY=localhost:5000
DOCKER_TAG_PREFIX=latest

# Logging
LOG_LEVEL=INFO
FORGE_LOG_LEVEL=INFO
FORGE_ENABLE_METRICS=true
FORGE_ENABLE_HEALTH_CHECK=true

# =============================================================================
# ENVIRONMENT-SPECIFIC OVERRIDES
# =============================================================================
# Create these files for environment-specific settings:
# - .env.development: Development configuration
# - .env.production: Production configuration
# - .env.local: Personal/local overrides

# Development example (add to .env.development):
# LOG_LEVEL=DEBUG
# AUTH_REQUIRED=false
# SECURE_COOKIES=false

# Production example (add to .env.production):
# LOG_LEVEL=INFO
# AUTH_REQUIRED=true
# SECURE_COOKIES=true
# NODE_ENV=production

<<<<<<< Updated upstream
# =============================================================================
# IDE CONFIGURATION NOTE
# =============================================================================
# Stack-specific API keys should be configured in your IDE's mcp.json file:
# - TAVILY_API_KEY
# - SNYK_TOKEN
# - GITHUB_PERSONAL_ACCESS_TOKEN
# - POSTGRES_CONNECTION_STRING
# - MONGODB_CONNECTION_STRING
# - FIGMA_ACCESS_TOKEN

# Example IDE configuration (~/.cursor/mcp.json):
# {
#   "mcpServers": {
#     "forge-mcp-gateway": {
#       "command": "npx",
#       "args": ["@forge-mcp-gateway/client"],
#       "env": {
#         "TAVILY_API_KEY": "your-api-key-here",
#         "SNYK_TOKEN": "your-snyk-token-here"
#       }
#     }
#   }
# }

# See docs/IDE_SETUP_GUIDE.md for detailed configuration examples.
=======
# MCP client wrapper: used if data/.mcp-client-url is missing (e.g. http://host.docker.internal:4444/servers/<UUID>/mcp)
# MCP_CLIENT_SERVER_URL=
# Backward compatibility: CURSOR_MCP_SERVER_URL still works

# MCP client timeout in ms (make use-mcp-client-wrapper sets this in mcp.json; default 120000). Increase if you see -32001 Request timed out.
# MCP_CLIENT_TIMEOUT_MS=120000
# Backward compatibility: CURSOR_MCP_TIMEOUT_MS still works

# Tool Router Configuration
# Gateway timeout in milliseconds (default: 120000)
# GATEWAY_TIMEOUT_MS=120000

# Maximum number of retry attempts for gateway requests (default: 3)
# GATEWAY_MAX_RETRIES=3

# Delay between retries in milliseconds (default: 2000)
# GATEWAY_RETRY_DELAY_MS=2000

# Maximum number of tools to return in search results (default: 10)
# MAX_TOOLS_SEARCH=10

# Default number of top tools to select for task execution (default: 1)
# DEFAULT_TOP_N=1
>>>>>>> Stashed changes
